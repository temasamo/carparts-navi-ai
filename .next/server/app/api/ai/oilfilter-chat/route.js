"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai/oilfilter-chat/route";
exports.ids = ["app/api/ai/oilfilter-chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_teruhikookuyama_workspace_carparts_navi_ai_app_api_ai_oilfilter_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/ai/oilfilter-chat/route.ts */ \"(rsc)/./app/api/ai/oilfilter-chat/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai/oilfilter-chat/route\",\n        pathname: \"/api/ai/oilfilter-chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai/oilfilter-chat/route\"\n    },\n    resolvedPagePath: \"/Users/teruhikookuyama/workspace/carparts-navi-ai/app/api/ai/oilfilter-chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_teruhikookuyama_workspace_carparts_navi_ai_app_api_ai_oilfilter_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/ai/oilfilter-chat/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaSUyRm9pbGZpbHRlci1jaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZhaSUyRm9pbGZpbHRlci1jaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWklMkZvaWxmaWx0ZXItY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRlcnVoaWtvb2t1eWFtYSUyRndvcmtzcGFjZSUyRmNhcnBhcnRzLW5hdmktYWklMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdGVydWhpa29va3V5YW1hJTJGd29ya3NwYWNlJTJGY2FycGFydHMtbmF2aS1haSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDa0Q7QUFDakg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FycGFydHMtbmF2aS1haS8/NDE1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvdGVydWhpa29va3V5YW1hL3dvcmtzcGFjZS9jYXJwYXJ0cy1uYXZpLWFpL2FwcC9hcGkvYWkvb2lsZmlsdGVyLWNoYXQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWkvb2lsZmlsdGVyLWNoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3RlcnVoaWtvb2t1eWFtYS93b3Jrc3BhY2UvY2FycGFydHMtbmF2aS1haS9hcHAvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ai/oilfilter-chat/route.ts":
/*!********************************************!*\
  !*** ./app/api/ai/oilfilter-chat/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(rsc)/./lib/supabaseClient.ts\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function POST(req) {\n    try {\n        const { query } = await req.json();\n        if (!query) {\n            return Response.json({\n                error: \"Missing query\"\n            }, {\n                status: 400\n            });\n        }\n        // --- Step1: ChatGPTで検索タイプを判定（型番 or 車種名） ---\n        const typeDetectionPrompt = `\n以下の入力文が「型番・商品名」か「車種名」かを判定してください。\n型番の例：TO-1S、HO-3、141353-0001\n車種名の例：アクア、プリウス、クラウン\n\n出力はJSON形式で:\n{\"type\": \"part_number\" or \"vehicle\", \"value\": \"抽出した値\"} のみを返してください。\n\n入力文: ${query}\n    `;\n        const typeDetectionRes = await openai.chat.completions.create({\n            model: \"gpt-4o-mini\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: typeDetectionPrompt\n                }\n            ],\n            temperature: 0\n        });\n        const typeRawText = typeDetectionRes.choices[0].message?.content || \"{}\";\n        let searchType = {\n            type: \"vehicle\",\n            value: \"\"\n        };\n        try {\n            searchType = JSON.parse(typeRawText);\n        } catch  {\n            console.warn(\"⚠️ JSON parse error:\", typeRawText);\n        }\n        console.log(\"\\uD83D\\uDD0D 検索タイプ:\", searchType);\n        let products = [];\n        // --- Step2: 型番検索の場合 ---\n        if (searchType.type === \"part_number\") {\n            const { data: directProducts, error: directError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"car_parts_products\").select(\"*\").ilike(\"product_name\", `%${searchType.value}%`);\n            if (directError) {\n                console.error(\"❌ 商品名検索エラー:\", directError.message);\n                return Response.json({\n                    error: \"product search failed\"\n                }, {\n                    status: 500\n                });\n            }\n            if (!directProducts || directProducts.length === 0) {\n                return Response.json({\n                    answer: `型番「${searchType.value}」に該当するオイルフィルターが見つかりませんでした。`\n                });\n            }\n            products = directProducts;\n        } else {\n            // --- Step3: 車種名検索の場合（既存ロジック） ---\n            const extractionPrompt = `\n以下の日本語文章から、「メーカー名」「車種名」「年式」を抽出してください。\n出力はJSON形式で:\n{\"maker\": \"...\", \"model\": \"...\", \"year\": \"....\"} のみを返してください。\n\n入力文: ${query}\n      `;\n            const extractionRes = await openai.chat.completions.create({\n                model: \"gpt-4o-mini\",\n                messages: [\n                    {\n                        role: \"user\",\n                        content: extractionPrompt\n                    }\n                ],\n                temperature: 0\n            });\n            const rawText = extractionRes.choices[0].message?.content || \"{}\";\n            let carInfo1 = {\n                maker: \"\",\n                model: \"\",\n                year: \"\"\n            };\n            try {\n                carInfo1 = JSON.parse(rawText);\n            } catch  {\n                console.warn(\"⚠️ JSON parse error:\", rawText);\n            }\n            console.log(\"\\uD83D\\uDE97 抽出結果:\", carInfo1);\n            // --- Step4: Supabaseでfitment検索 ---\n            const { data: fitments, error: fitError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"car_fitments\").select(\"*\").ilike(\"model\", `%${carInfo1.model}%`);\n            if (fitError) {\n                console.error(\"❌ fitments検索エラー:\", fitError.message);\n                return Response.json({\n                    error: \"fitments search failed\"\n                }, {\n                    status: 500\n                });\n            }\n            if (!fitments || fitments.length === 0) {\n                return Response.json({\n                    answer: `該当するオイルフィルターが見つかりませんでした。車種名をもう少し詳しく教えてください（例：「プリウス 2015年式」）。`\n                });\n            }\n            // --- Step5: JOINして商品情報を取得 ---\n            const productIds = fitments.map((f)=>f.product_id);\n            const { data: fitmentProducts, error: prodError1 } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"car_parts_products\").select(\"*\").in(\"id\", productIds);\n            if (prodError1) {\n                console.error(\"❌ products検索エラー:\", prodError1.message);\n                return Response.json({\n                    error: \"products search failed\"\n                }, {\n                    status: 500\n                });\n            }\n            products = fitmentProducts || [];\n        }\n        if (prodError) {\n            console.error(\"❌ products検索エラー:\", prodError.message);\n            return Response.json({\n                error: \"products search failed\"\n            }, {\n                status: 500\n            });\n        }\n        if (!products || products.length === 0) {\n            return Response.json({\n                answer: \"該当する商品データが見つかりませんでした。\"\n            });\n        }\n        // --- Step4: レスポンス整形 ---\n        // データベースに既にアフィリエイトURLが保存されている場合はそのまま使用\n        const results = products.map((p)=>({\n                name: p.product_name,\n                price: p.price,\n                url: p.url || \"（URL未設定）\"\n            }));\n        const answer = results.length === 1 ? `「${carInfo.model}」には ${results[0].name}（${results[0].price}）が適合します。` : `${carInfo.model}に適合するオイルフィルターは以下の通りです：\\n\\n${results.map((r)=>`・${r.name}（${r.price}）`).join(\"\\n\")}`;\n        return Response.json({\n            status: \"ok\",\n            carInfo,\n            results,\n            answer\n        });\n    } catch (error) {\n        console.error(\"❌ Unexpected error:\", error);\n        return Response.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUNwQjtBQUU1QixNQUFNRSxTQUFTLElBQUlELDhDQUFNQSxDQUFDO0lBQ3hCRSxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFDcEM7QUFFTyxlQUFlQyxLQUFLQyxHQUFZO0lBQ3JDLElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ELElBQUlFLElBQUk7UUFFaEMsSUFBSSxDQUFDRCxPQUFPO1lBQ1YsT0FBT0UsU0FBU0QsSUFBSSxDQUFDO2dCQUFFRSxPQUFPO1lBQWdCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNqRTtRQUVBLDZDQUE2QztRQUM3QyxNQUFNQyxzQkFBc0IsQ0FBQzs7Ozs7Ozs7S0FRNUIsRUFBRUwsTUFBTTtJQUNULENBQUM7UUFFRCxNQUFNTSxtQkFBbUIsTUFBTWIsT0FBT2MsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUM1REMsT0FBTztZQUNQQyxVQUFVO2dCQUFDO29CQUFFQyxNQUFNO29CQUFRQyxTQUFTUjtnQkFBb0I7YUFBRTtZQUMxRFMsYUFBYTtRQUNmO1FBRUEsTUFBTUMsY0FBY1QsaUJBQWlCVSxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLEVBQUVKLFdBQVc7UUFDcEUsSUFBSUssYUFBYTtZQUFFQyxNQUFNO1lBQVdDLE9BQU87UUFBRztRQUU5QyxJQUFJO1lBQ0ZGLGFBQWFHLEtBQUtDLEtBQUssQ0FBQ1A7UUFDMUIsRUFBRSxPQUFNO1lBQ05RLFFBQVFDLElBQUksQ0FBQyx3QkFBd0JUO1FBQ3ZDO1FBRUFRLFFBQVFFLEdBQUcsQ0FBQyx1QkFBYVA7UUFFekIsSUFBSVEsV0FBa0IsRUFBRTtRQUV4Qix5QkFBeUI7UUFDekIsSUFBSVIsV0FBV0MsSUFBSSxLQUFLLGVBQWU7WUFDckMsTUFBTSxFQUFFUSxNQUFNQyxjQUFjLEVBQUV6QixPQUFPMEIs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L2FwaS9haS9vaWxmaWx0ZXItY2hhdC9yb3V0ZS50cz81MGJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlQ2xpZW50XCI7XG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIjtcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkhLFxufSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcXVlcnkgfSA9IGF3YWl0IHJlcS5qc29uKCk7XG5cbiAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk1pc3NpbmcgcXVlcnlcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIC0tLSBTdGVwMTogQ2hhdEdQVOOBp+aknOe0ouOCv+OCpOODl+OCkuWIpOWumu+8iOWei+eVqiBvciDou4rnqK7lkI3vvIkgLS0tXG4gICAgY29uc3QgdHlwZURldGVjdGlvblByb21wdCA9IGBcbuS7peS4i+OBruWFpeWKm+aWh+OBjOOAjOWei+eVquODu+WVhuWTgeWQjeOAjeOBi+OAjOi7iueoruWQjeOAjeOBi+OCkuWIpOWumuOBl+OBpuOBj+OBoOOBleOBhOOAglxu5Z6L55Wq44Gu5L6L77yaVE8tMVPjgIFITy0z44CBMTQxMzUzLTAwMDFcbui7iueoruWQjeOBruS+i++8muOCouOCr+OCouOAgeODl+ODquOCpuOCueOAgeOCr+ODqeOCpuODs1xuXG7lh7rlipvjga9KU09O5b2i5byP44GnOlxue1widHlwZVwiOiBcInBhcnRfbnVtYmVyXCIgb3IgXCJ2ZWhpY2xlXCIsIFwidmFsdWVcIjogXCLmir3lh7rjgZfjgZ/lgKRcIn0g44Gu44G/44KS6L+U44GX44Gm44GP44Gg44GV44GE44CCXG5cbuWFpeWKm+aWhzogJHtxdWVyeX1cbiAgICBgO1xuXG4gICAgY29uc3QgdHlwZURldGVjdGlvblJlcyA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICBtb2RlbDogXCJncHQtNG8tbWluaVwiLFxuICAgICAgbWVzc2FnZXM6IFt7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiB0eXBlRGV0ZWN0aW9uUHJvbXB0IH1dLFxuICAgICAgdGVtcGVyYXR1cmU6IDAsXG4gICAgfSk7XG5cbiAgICBjb25zdCB0eXBlUmF3VGV4dCA9IHR5cGVEZXRlY3Rpb25SZXMuY2hvaWNlc1swXS5tZXNzYWdlPy5jb250ZW50IHx8IFwie31cIjtcbiAgICBsZXQgc2VhcmNoVHlwZSA9IHsgdHlwZTogXCJ2ZWhpY2xlXCIsIHZhbHVlOiBcIlwiIH07XG5cbiAgICB0cnkge1xuICAgICAgc2VhcmNoVHlwZSA9IEpTT04ucGFyc2UodHlwZVJhd1RleHQpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgY29uc29sZS53YXJuKFwi4pqg77iPIEpTT04gcGFyc2UgZXJyb3I6XCIsIHR5cGVSYXdUZXh0KTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcIvCflI0g5qSc57Si44K/44Kk44OXOlwiLCBzZWFyY2hUeXBlKTtcblxuICAgIGxldCBwcm9kdWN0czogYW55W10gPSBbXTtcblxuICAgIC8vIC0tLSBTdGVwMjog5Z6L55Wq5qSc57Si44Gu5aC05ZCIIC0tLVxuICAgIGlmIChzZWFyY2hUeXBlLnR5cGUgPT09IFwicGFydF9udW1iZXJcIikge1xuICAgICAgY29uc3QgeyBkYXRhOiBkaXJlY3RQcm9kdWN0cywgZXJyb3I6IGRpcmVjdEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcImNhcl9wYXJ0c19wcm9kdWN0c1wiKVxuICAgICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgICAuaWxpa2UoXCJwcm9kdWN0X25hbWVcIiwgYCUke3NlYXJjaFR5cGUudmFsdWV9JWApO1xuXG4gICAgICBpZiAoZGlyZWN0RXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihcIuKdjCDllYblk4HlkI3mpJzntKLjgqjjg6njg7w6XCIsIGRpcmVjdEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcInByb2R1Y3Qgc2VhcmNoIGZhaWxlZFwiIH0sIHsgc3RhdHVzOiA1MDAgfSk7XG4gICAgICB9XG5cbiAgICAgIGlmICghZGlyZWN0UHJvZHVjdHMgfHwgZGlyZWN0UHJvZHVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHJldHVybiBSZXNwb25zZS5qc29uKHtcbiAgICAgICAgICBhbnN3ZXI6IGDlnovnlarjgIwke3NlYXJjaFR5cGUudmFsdWV944CN44Gr6Kmy5b2T44GZ44KL44Kq44Kk44Or44OV44Kj44Or44K/44O844GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCYCxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIHByb2R1Y3RzID0gZGlyZWN0UHJvZHVjdHM7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIC0tLSBTdGVwMzog6LuK56iu5ZCN5qSc57Si44Gu5aC05ZCI77yI5pei5a2Y44Ot44K444OD44Kv77yJIC0tLVxuICAgICAgY29uc3QgZXh0cmFjdGlvblByb21wdCA9IGBcbuS7peS4i+OBruaXpeacrOiqnuaWh+eroOOBi+OCieOAgeOAjOODoeODvOOCq+ODvOWQjeOAjeOAjOi7iueoruWQjeOAjeOAjOW5tOW8j+OAjeOCkuaKveWHuuOBl+OBpuOBj+OBoOOBleOBhOOAglxu5Ye65Yqb44GvSlNPTuW9ouW8j+OBpzpcbntcIm1ha2VyXCI6IFwiLi4uXCIsIFwibW9kZWxcIjogXCIuLi5cIiwgXCJ5ZWFyXCI6IFwiLi4uLlwifSDjga7jgb/jgpLov5TjgZfjgabjgY/jgaDjgZXjgYTjgIJcblxu5YWl5Yqb5paHOiAke3F1ZXJ5fVxuICAgICAgYDtcblxuICAgICAgY29uc3QgZXh0cmFjdGlvblJlcyA9IGF3YWl0IG9wZW5haS5jaGF0LmNvbXBsZXRpb25zLmNyZWF0ZSh7XG4gICAgICAgIG1vZGVsOiBcImdwdC00by1taW5pXCIsXG4gICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogZXh0cmFjdGlvblByb21wdCB9XSxcbiAgICAgICAgdGVtcGVyYXR1cmU6IDAsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmF3VGV4dCA9IGV4dHJhY3Rpb25SZXMuY2hvaWNlc1swXS5tZXNzYWdlPy5jb250ZW50IHx8IFwie31cIjtcbiAgICAgIGxldCBjYXJJbmZvID0geyBtYWtlcjogXCJcIiwgbW9kZWw6IFwiXCIsIHllYXI6IFwiXCIgfTtcblxuICAgICAgdHJ5IHtcbiAgICAgICAgY2FySW5mbyA9IEpTT04ucGFyc2UocmF3VGV4dCk7XG4gICAgICB9IGNhdGNoIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwi4pqg77iPIEpTT04gcGFyc2UgZXJyb3I6XCIsIHJhd1RleHQpO1xuICAgICAgfVxuXG4gICAgICBjb25zb2xlLmxvZyhcIvCfmpcg5oq95Ye657WQ5p6cOlwiLCBjYXJJbmZvKTtcblxuICAgICAgLy8gLS0tIFN0ZXA0OiBTdXBhYmFzZeOBp2ZpdG1lbnTmpJzntKIgLS0tXG4gICAgICBjb25zdCB7IGRhdGE6IGZpdG1lbnRzLCBlcnJvcjogZml0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY2FyX2ZpdG1lbnRzXCIpXG4gICAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAgIC5pbGlrZShcIm1vZGVsXCIsIGAlJHtjYXJJbmZvLm1vZGVsfSVgKTtcblxuICAgICAgaWYgKGZpdEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgZml0bWVudHPmpJzntKLjgqjjg6njg7w6XCIsIGZpdEVycm9yLm1lc3NhZ2UpO1xuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcImZpdG1lbnRzIHNlYXJjaCBmYWlsZWRcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIWZpdG1lbnRzIHx8IGZpdG1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgICAgYW5zd2VyOiBg6Kmy5b2T44GZ44KL44Kq44Kk44Or44OV44Kj44Or44K/44O844GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CC6LuK56iu5ZCN44KS44KC44GG5bCR44GX6Kmz44GX44GP5pWZ44GI44Gm44GP44Gg44GV44GE77yI5L6L77ya44CM44OX44Oq44Km44K5IDIwMTXlubTlvI/jgI3vvInjgIJgLFxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLy8gLS0tIFN0ZXA1OiBKT0lO44GX44Gm5ZWG5ZOB5oOF5aCx44KS5Y+W5b6XIC0tLVxuICAgICAgY29uc3QgcHJvZHVjdElkcyA9IGZpdG1lbnRzLm1hcCgoZikgPT4gZi5wcm9kdWN0X2lkKTtcblxuICAgICAgY29uc3QgeyBkYXRhOiBmaXRtZW50UHJvZHVjdHMsIGVycm9yOiBwcm9kRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiY2FyX3BhcnRzX3Byb2R1Y3RzXCIpXG4gICAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAgIC5pbihcImlkXCIsIHByb2R1Y3RJZHMpO1xuXG4gICAgICBpZiAocHJvZEVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgcHJvZHVjdHPmpJzntKLjgqjjg6njg7w6XCIsIHByb2RFcnJvci5tZXNzYWdlKTtcbiAgICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJwcm9kdWN0cyBzZWFyY2ggZmFpbGVkXCIgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICAgIH1cblxuICAgICAgcHJvZHVjdHMgPSBmaXRtZW50UHJvZHVjdHMgfHwgW107XG4gICAgfVxuXG4gICAgaWYgKHByb2RFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBwcm9kdWN0c+aknOe0ouOCqOODqeODvDpcIiwgcHJvZEVycm9yLm1lc3NhZ2UpO1xuICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogXCJwcm9kdWN0cyBzZWFyY2ggZmFpbGVkXCIgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG5cbiAgICBpZiAoIXByb2R1Y3RzIHx8IHByb2R1Y3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgICBhbnN3ZXI6IFwi6Kmy5b2T44GZ44KL5ZWG5ZOB44OH44O844K/44GM6KaL44Gk44GL44KK44G+44Gb44KT44Gn44GX44Gf44CCXCIsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICAvLyAtLS0gU3RlcDQ6IOODrOOCueODneODs+OCueaVtOW9oiAtLS1cbiAgICAvLyDjg4fjg7zjgr/jg5njg7zjgrnjgavml6LjgavjgqLjg5XjgqPjg6rjgqjjgqTjg4hVUkzjgYzkv53lrZjjgZXjgozjgabjgYTjgovloLTlkIjjga/jgZ3jga7jgb7jgb7kvb/nlKhcbiAgICBjb25zdCByZXN1bHRzID0gcHJvZHVjdHMubWFwKChwKSA9PiAoe1xuICAgICAgbmFtZTogcC5wcm9kdWN0X25hbWUsXG4gICAgICBwcmljZTogcC5wcmljZSxcbiAgICAgIHVybDogcC51cmwgfHwgXCLvvIhVUkzmnKroqK3lrprvvIlcIixcbiAgICB9KSk7XG5cbiAgICBjb25zdCBhbnN3ZXIgPVxuICAgICAgcmVzdWx0cy5sZW5ndGggPT09IDFcbiAgICAgICAgPyBg44CMJHtjYXJJbmZvLm1vZGVsfeOAjeOBq+OBryAke3Jlc3VsdHNbMF0ubmFtZX3vvIgke3Jlc3VsdHNbMF0ucHJpY2V977yJ44GM6YGp5ZCI44GX44G+44GZ44CCYFxuICAgICAgICA6IGAke2NhckluZm8ubW9kZWx944Gr6YGp5ZCI44GZ44KL44Kq44Kk44Or44OV44Kj44Or44K/44O844Gv5Lul5LiL44Gu6YCa44KK44Gn44GZ77yaXFxuXFxuJHtyZXN1bHRzXG4gICAgICAgICAgICAubWFwKChyKSA9PiBg44O7JHtyLm5hbWV977yIJHtyLnByaWNlfe+8iWApXG4gICAgICAgICAgICAuam9pbihcIlxcblwiKX1gO1xuXG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oe1xuICAgICAgc3RhdHVzOiBcIm9rXCIsXG4gICAgICBjYXJJbmZvLFxuICAgICAgcmVzdWx0cyxcbiAgICAgIGFuc3dlcixcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoXCLinYwgVW5leHBlY3RlZCBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBSZXNwb25zZS5qc29uKHsgZXJyb3I6IGVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwiT3BlbkFJIiwib3BlbmFpIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIk9QRU5BSV9BUElfS0VZIiwiUE9TVCIsInJlcSIsInF1ZXJ5IiwianNvbiIsIlJlc3BvbnNlIiwiZXJyb3IiLCJzdGF0dXMiLCJ0eXBlRGV0ZWN0aW9uUHJvbXB0IiwidHlwZURldGVjdGlvblJlcyIsImNoYXQiLCJjb21wbGV0aW9ucyIsImNyZWF0ZSIsIm1vZGVsIiwibWVzc2FnZXMiLCJyb2xlIiwiY29udGVudCIsInRlbXBlcmF0dXJlIiwidHlwZVJhd1RleHQiLCJjaG9pY2VzIiwibWVzc2FnZSIsInNlYXJjaFR5cGUiLCJ0eXBlIiwidmFsdWUiLCJKU09OIiwicGFyc2UiLCJjb25zb2xlIiwid2FybiIsImxvZyIsInByb2R1Y3RzIiwiZGF0YSIsImRpcmVjdFByb2R1Y3RzIiwiZGlyZWN0RXJyb3IiLCJmcm9tIiwic2VsZWN0IiwiaWxpa2UiLCJsZW5ndGgiLCJhbnN3ZXIiLCJleHRyYWN0aW9uUHJvbXB0IiwiZXh0cmFjdGlvblJlcyIsInJhd1RleHQiLCJjYXJJbmZvIiwibWFrZXIiLCJ5ZWFyIiwiZml0bWVudHMiLCJmaXRFcnJvciIsInByb2R1Y3RJZHMiLCJtYXAiLCJmIiwicHJvZHVjdF9pZCIsImZpdG1lbnRQcm9kdWN0cyIsInByb2RFcnJvciIsImluIiwicmVzdWx0cyIsInAiLCJuYW1lIiwicHJvZHVjdF9uYW1lIiwicHJpY2UiLCJ1cmwiLCJyIiwiam9pbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai/oilfilter-chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseClient.ts":
/*!*******************************!*\
  !*** ./lib/supabaseClient.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Supabaseクライアントの共通設定\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://jqlhlvruxkcffjvjzxmy.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpxbGhsdnJ1eGtjZmZqdmp6eG15Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzODEzNTQsImV4cCI6MjA3Njk1NzM1NH0.ozUsjna8HJ_aaAZNX3Zxmqoq6jU2xWhXXI5bGMP3n-w\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFFckQsc0JBQXNCO0FBQ2YsTUFBTUMsV0FBV0QsbUVBQVlBLENBQ2xDRSwwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QyIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcnBhcnRzLW5hdmktYWkvLi9saWIvc3VwYWJhc2VDbGllbnQudHM/M2E3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5cbi8vIFN1cGFiYXNl44Kv44Op44Kk44Ki44Oz44OI44Gu5YWx6YCa6Kit5a6aXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuKTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseClient.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/@supabase","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/tslib","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();