"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/ai/oilfilter-chat/route";
exports.ids = ["app/api/ai/oilfilter-chat/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "node:fs":
/*!**************************!*\
  !*** external "node:fs" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("node:fs");

/***/ }),

/***/ "node:stream":
/*!******************************!*\
  !*** external "node:stream" ***!
  \******************************/
/***/ ((module) => {

module.exports = require("node:stream");

/***/ }),

/***/ "node:stream/web":
/*!**********************************!*\
  !*** external "node:stream/web" ***!
  \**********************************/
/***/ ((module) => {

module.exports = require("node:stream/web");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   headerHooks: () => (/* binding */ headerHooks),\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage),\n/* harmony export */   staticGenerationBailout: () => (/* binding */ staticGenerationBailout)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var _Users_teruhikookuyama_workspace_carparts_navi_ai_app_api_ai_oilfilter_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./app/api/ai/oilfilter-chat/route.ts */ \"(rsc)/./app/api/ai/oilfilter-chat/route.ts\");\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/ai/oilfilter-chat/route\",\n        pathname: \"/api/ai/oilfilter-chat\",\n        filename: \"route\",\n        bundlePath: \"app/api/ai/oilfilter-chat/route\"\n    },\n    resolvedPagePath: \"/Users/teruhikookuyama/workspace/carparts-navi-ai/app/api/ai/oilfilter-chat/route.ts\",\n    nextConfigOutput,\n    userland: _Users_teruhikookuyama_workspace_carparts_navi_ai_app_api_ai_oilfilter_chat_route_ts__WEBPACK_IMPORTED_MODULE_2__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks, headerHooks, staticGenerationBailout } = routeModule;\nconst originalPathname = \"/api/ai/oilfilter-chat/route\";\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZhaSUyRm9pbGZpbHRlci1jaGF0JTJGcm91dGUmcGFnZT0lMkZhcGklMkZhaSUyRm9pbGZpbHRlci1jaGF0JTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGYWklMkZvaWxmaWx0ZXItY2hhdCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnRlcnVoaWtvb2t1eWFtYSUyRndvcmtzcGFjZSUyRmNhcnBhcnRzLW5hdmktYWklMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGdGVydWhpa29va3V5YW1hJTJGd29ya3NwYWNlJTJGY2FycGFydHMtbmF2aS1haSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDa0Q7QUFDakg7QUFDQTtBQUNBO0FBQ0Esd0JBQXdCLGdIQUFtQjtBQUMzQztBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSx1R0FBdUc7QUFDL0c7QUFDaUo7O0FBRWpKIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FycGFydHMtbmF2aS1haS8/NDE1MCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvdGVydWhpa29va3V5YW1hL3dvcmtzcGFjZS9jYXJwYXJ0cy1uYXZpLWFpL2FwcC9hcGkvYWkvb2lsZmlsdGVyLWNoYXQvcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvYWkvb2lsZmlsdGVyLWNoYXRcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3RlcnVoaWtvb2t1eWFtYS93b3Jrc3BhY2UvY2FycGFydHMtbmF2aS1haS9hcHAvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlXCI7XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIGhlYWRlckhvb2tzLCBzdGF0aWNHZW5lcmF0aW9uQmFpbG91dCwgb3JpZ2luYWxQYXRobmFtZSwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/ai/oilfilter-chat/route.ts":
/*!********************************************!*\
  !*** ./app/api/ai/oilfilter-chat/route.ts ***!
  \********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(rsc)/./lib/supabaseClient.ts\");\n/* harmony import */ var openai__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! openai */ \"(rsc)/./node_modules/openai/index.mjs\");\n\n\nconst openai = new openai__WEBPACK_IMPORTED_MODULE_1__[\"default\"]({\n    apiKey: process.env.OPENAI_API_KEY\n});\nasync function POST(req) {\n    try {\n        const { query } = await req.json();\n        if (!query) {\n            return Response.json({\n                error: \"Missing query\"\n            }, {\n                status: 400\n            });\n        }\n        // --- Step1: ChatGPTで車種情報を抽出 ---\n        const extractionPrompt = `\n以下の日本語文章から、「メーカー名」「車種名」「年式」を抽出してください。\n出力はJSON形式で:\n{\"maker\": \"...\", \"model\": \"...\", \"year\": \"....\"} のみを返してください。\n\n入力文: ${query}\n    `;\n        const extractionRes = await openai.chat.completions.create({\n            model: \"gpt-4o-mini\",\n            messages: [\n                {\n                    role: \"user\",\n                    content: extractionPrompt\n                }\n            ],\n            temperature: 0\n        });\n        const rawText = extractionRes.choices[0].message?.content || \"{}\";\n        let carInfo = {\n            maker: \"\",\n            model: \"\",\n            year: \"\"\n        };\n        try {\n            carInfo = JSON.parse(rawText);\n        } catch  {\n            console.warn(\"⚠️ JSON parse error:\", rawText);\n        }\n        console.log(\"\\uD83D\\uDE97 抽出結果:\", carInfo);\n        // --- Step2: Supabaseでfitment検索 ---\n        const { data: fitments, error: fitError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"car_fitments\").select(\"*\").ilike(\"model\", `%${carInfo.model}%`);\n        if (fitError) {\n            console.error(\"❌ fitments検索エラー:\", fitError.message);\n            return Response.json({\n                error: \"fitments search failed\"\n            }, {\n                status: 500\n            });\n        }\n        if (!fitments || fitments.length === 0) {\n            return Response.json({\n                answer: `該当するオイルフィルターが見つかりませんでした。車種名をもう少し詳しく教えてください（例：「プリウス 2015年式」）。`\n            });\n        }\n        // --- Step3: JOINして商品情報を取得 ---\n        const productIds = fitments.map((f)=>f.product_id);\n        const { data: products, error: prodError } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_0__.supabase.from(\"car_parts_products\").select(\"*\").in(\"id\", productIds);\n        if (prodError) {\n            console.error(\"❌ products検索エラー:\", prodError.message);\n            return Response.json({\n                error: \"products search failed\"\n            }, {\n                status: 500\n            });\n        }\n        if (!products || products.length === 0) {\n            return Response.json({\n                answer: \"該当する商品データが見つかりませんでした。\"\n            });\n        }\n        // --- Step4: レスポンス整形 ---\n        const results = products.map((p)=>({\n                name: p.product_name,\n                price: p.price,\n                url: p.url || \"（URL未設定）\"\n            }));\n        const answer = results.length === 1 ? `「${carInfo.model}」には ${results[0].name}（${results[0].price}）が適合します。` : `${carInfo.model}に適合するオイルフィルターは以下の通りです：\\n\\n${results.map((r)=>`・${r.name}（${r.price}）`).join(\"\\n\")}`;\n        return Response.json({\n            status: \"ok\",\n            carInfo,\n            results,\n            answer\n        });\n    } catch (error) {\n        console.error(\"❌ Unexpected error:\", error);\n        return Response.json({\n            error: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2FpL29pbGZpbHRlci1jaGF0L3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUFnRDtBQUNwQjtBQUU1QixNQUFNRSxTQUFTLElBQUlELDhDQUFNQSxDQUFDO0lBQ3hCRSxRQUFRQyxRQUFRQyxHQUFHLENBQUNDLGNBQWM7QUFDcEM7QUFFTyxlQUFlQyxLQUFLQyxHQUFZO0lBQ3JDLElBQUk7UUFDRixNQUFNLEVBQUVDLEtBQUssRUFBRSxHQUFHLE1BQU1ELElBQUlFLElBQUk7UUFFaEMsSUFBSSxDQUFDRCxPQUFPO1lBQ1YsT0FBT0UsU0FBU0QsSUFBSSxDQUFDO2dCQUFFRSxPQUFPO1lBQWdCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUNqRTtRQUVBLGlDQUFpQztRQUNqQyxNQUFNQyxtQkFBbUIsQ0FBQzs7Ozs7S0FLekIsRUFBRUwsTUFBTTtJQUNULENBQUM7UUFFRCxNQUFNTSxnQkFBZ0IsTUFBTWIsT0FBT2MsSUFBSSxDQUFDQyxXQUFXLENBQUNDLE1BQU0sQ0FBQztZQUN6REMsT0FBTztZQUNQQyxVQUFVO2dCQUFDO29CQUFFQyxNQUFNO29CQUFRQyxTQUFTUjtnQkFBaUI7YUFBRTtZQUN2RFMsYUFBYTtRQUNmO1FBRUEsTUFBTUMsVUFBVVQsY0FBY1UsT0FBTyxDQUFDLEVBQUUsQ0FBQ0MsT0FBTyxFQUFFSixXQUFXO1FBQzdELElBQUlLLFVBQVU7WUFBRUMsT0FBTztZQUFJVCxPQUFPO1lBQUlVLE1BQU07UUFBRztRQUUvQyxJQUFJO1lBQ0ZGLFVBQVVHLEtBQUtDLEtBQUssQ0FBQ1A7UUFDdkIsRUFBRSxPQUFNO1lBQ05RLFFBQVFDLElBQUksQ0FBQyx3QkFBd0JUO1FBQ3ZDO1FBRUFRLFFBQVFFLEdBQUcsQ0FBQyxzQkFBWVA7UUFFeEIsb0NBQW9DO1FBQ3BDLE1BQU0sRUFBRVEsTUFBTUMsUUFBUSxFQUFFeEIsT0FBT3lCLFFBQVEsRUFBRSxHQUFHLE1BQU1yQyx5REFBUUEsQ0FDdkRzQyxJQUFJLENBQUMsZ0JBQ0xDLE1BQU0sQ0FBQyxLQUNQQyxLQUFLLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRWIsUUFBUVIsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUV0QyxJQUFJa0IsVUFBVTtZQUNaTCxRQUFRcEIsS0FBSyxDQUFDLG9CQUFvQnlCLFNBQVNYLE9BQU87WUFDbEQsT0FBT2YsU0FBU0QsSUFBSSxDQUFDO2dCQUFFRSxPQUFPO1lBQXlCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMxRTtRQUVBLElBQUksQ0FBQ3VCLFlBQVlBLFNBQVNLLE1BQU0sS0FBSyxHQUFHO1lBQ3RDLE9BQU85QixTQUFTRCxJQUFJLENBQUM7Z0JBQ25CZ0MsUUFBUSxDQUFDLDREQUE0RCxDQUFDO1lBQ3hFO1FBQ0Y7UUFFQSwrQkFBK0I7UUFDL0IsTUFBTUMsYUFBYVAsU0FBU1EsR0FBRyxDQUFDLENBQUNDLElBQU1BLEVBQUVDLFVBQVU7UUFFbkQsTUFBTSxFQUFFWCxNQUFNWSxRQUFRLEVBQUVuQyxPQUFPb0MsU0FBUyxFQUFFLEdBQUcsTUFBTWhELHlEQUFRQSxDQUN4RHNDLElBQUksQ0FBQyxzQkFDTEMsTUFBTSxDQUFDLEtBQ1BVLEVBQUUsQ0FBQyxNQUFNTjtRQUVaLElBQUlLLFdBQVc7WUFDYmhCLFFBQVFwQixLQUFLLENBQUMsb0JBQW9Cb0MsVUFBVXRCLE9BQU87WUFDbkQsT0FBT2YsU0FBU0QsSUFBSSxDQUFDO2dCQUFFRSxPQUFPO1lBQXlCLEdBQUc7Z0JBQUVDLFFBQVE7WUFBSTtRQUMxRTtRQUVBLElBQUksQ0FBQ2tDLFlBQVlBLFNBQVNOLE1BQU0sS0FBSyxHQUFHO1lBQ3RDLE9BQU85QixTQUFTRCxJQUFJLENBQUM7Z0JBQ25CZ0MsUUFBUTtZQUNWO1FBQ0Y7UUFFQSx5QkFBeUI7UUFDekIsTUFBTVEsVUFBVUgsU0FBU0gsR0FBRyxDQUFDLENBQUNPLElBQU87Z0JBQ25DQyxNQUFNRCxFQUFFRSxZQUFZO2dCQUNwQkMsT0FBT0gsRUFBRUcsS0FBSztnQkFDZEMsS0FBS0osRUFBRUksR0FBRyxJQUFJO1lBQ2hCO1FBRUEsTUFBTWIsU0FDSlEsUUFBUVQsTUFBTSxLQUFLLElBQ2YsQ0FBQyxDQUFDLEVBQUVkLFFBQVFSLEtBQUssQ0FBQyxJQUFJLEVBQUUrQixPQUFPLENBQUMsRUFBRSxDQUFDRSxJQUFJLENBQUMsQ0FBQyxFQUFFRixPQUFPLENBQUMsRUFBRSxDQUFDSSxLQUFLLENBQUMsUUFBUSxDQUFDLEdBQ3JFLENBQUMsRUFBRTNCLFFBQVFSLEtBQUssQ0FBQywwQkFBMEIsRUFBRStCLFFBQzFDTixHQUFHLENBQUMsQ0FBQ1ksSUFBTSxDQUFDLENBQUMsRUFBRUEsRUFBRUosSUFBSSxDQUFDLENBQUMsRUFBRUksRUFBRUYsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUNuQ0csSUFBSSxDQUFDLE1BQU0sQ0FBQztRQUVyQixPQUFPOUMsU0FBU0QsSUFBSSxDQUFDO1lBQ25CRyxRQUFRO1lBQ1JjO1lBQ0F1QjtZQUNBUjtRQUNGO0lBQ0YsRUFBRSxPQUFPOUIsT0FBWTtRQUNuQm9CLFFBQVFwQixLQUFLLENBQUMsdUJBQXVCQTtRQUNyQyxPQUFPRCxTQUFTRCxJQUFJLENBQUM7WUFBRUUsT0FBT0EsTUFBTWMsT0FBTztRQUFDLEdBQUc7WUFBRWIsUUFBUTtRQUFJO0lBQy9EO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXJwYXJ0cy1uYXZpLWFpLy4vYXBwL2FwaS9haS9vaWxmaWx0ZXItY2hhdC9yb3V0ZS50cz81MGJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHN1cGFiYXNlIH0gZnJvbSBcIkAvbGliL3N1cGFiYXNlQ2xpZW50XCI7XG5pbXBvcnQgT3BlbkFJIGZyb20gXCJvcGVuYWlcIjtcblxuY29uc3Qgb3BlbmFpID0gbmV3IE9wZW5BSSh7XG4gIGFwaUtleTogcHJvY2Vzcy5lbnYuT1BFTkFJX0FQSV9LRVkhLFxufSk7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgcXVlcnkgfSA9IGF3YWl0IHJlcS5qc29uKCk7XG5cbiAgICBpZiAoIXF1ZXJ5KSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcIk1pc3NpbmcgcXVlcnlcIiB9LCB7IHN0YXR1czogNDAwIH0pO1xuICAgIH1cblxuICAgIC8vIC0tLSBTdGVwMTogQ2hhdEdQVOOBp+i7iueoruaDheWgseOCkuaKveWHuiAtLS1cbiAgICBjb25zdCBleHRyYWN0aW9uUHJvbXB0ID0gYFxu5Lul5LiL44Gu5pel5pys6Kqe5paH56ug44GL44KJ44CB44CM44Oh44O844Kr44O85ZCN44CN44CM6LuK56iu5ZCN44CN44CM5bm05byP44CN44KS5oq95Ye644GX44Gm44GP44Gg44GV44GE44CCXG7lh7rlipvjga9KU09O5b2i5byP44GnOlxue1wibWFrZXJcIjogXCIuLi5cIiwgXCJtb2RlbFwiOiBcIi4uLlwiLCBcInllYXJcIjogXCIuLi4uXCJ9IOOBruOBv+OCkui/lOOBl+OBpuOBj+OBoOOBleOBhOOAglxuXG7lhaXlipvmloc6ICR7cXVlcnl9XG4gICAgYDtcblxuICAgIGNvbnN0IGV4dHJhY3Rpb25SZXMgPSBhd2FpdCBvcGVuYWkuY2hhdC5jb21wbGV0aW9ucy5jcmVhdGUoe1xuICAgICAgbW9kZWw6IFwiZ3B0LTRvLW1pbmlcIixcbiAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogZXh0cmFjdGlvblByb21wdCB9XSxcbiAgICAgIHRlbXBlcmF0dXJlOiAwLFxuICAgIH0pO1xuXG4gICAgY29uc3QgcmF3VGV4dCA9IGV4dHJhY3Rpb25SZXMuY2hvaWNlc1swXS5tZXNzYWdlPy5jb250ZW50IHx8IFwie31cIjtcbiAgICBsZXQgY2FySW5mbyA9IHsgbWFrZXI6IFwiXCIsIG1vZGVsOiBcIlwiLCB5ZWFyOiBcIlwiIH07XG5cbiAgICB0cnkge1xuICAgICAgY2FySW5mbyA9IEpTT04ucGFyc2UocmF3VGV4dCk7XG4gICAgfSBjYXRjaCB7XG4gICAgICBjb25zb2xlLndhcm4oXCLimqDvuI8gSlNPTiBwYXJzZSBlcnJvcjpcIiwgcmF3VGV4dCk7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coXCLwn5qXIOaKveWHuue1kOaenDpcIiwgY2FySW5mbyk7XG5cbiAgICAvLyAtLS0gU3RlcDI6IFN1cGFiYXNl44GnZml0bWVudOaknOe0oiAtLS1cbiAgICBjb25zdCB7IGRhdGE6IGZpdG1lbnRzLCBlcnJvcjogZml0RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImNhcl9maXRtZW50c1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5pbGlrZShcIm1vZGVsXCIsIGAlJHtjYXJJbmZvLm1vZGVsfSVgKTtcblxuICAgIGlmIChmaXRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIuKdjCBmaXRtZW50c+aknOe0ouOCqOODqeODvDpcIiwgZml0RXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcImZpdG1lbnRzIHNlYXJjaCBmYWlsZWRcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIGlmICghZml0bWVudHMgfHwgZml0bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgIGFuc3dlcjogYOipsuW9k+OBmeOCi+OCquOCpOODq+ODleOCo+ODq+OCv+ODvOOBjOimi+OBpOOBi+OCiuOBvuOBm+OCk+OBp+OBl+OBn+OAgui7iueoruWQjeOCkuOCguOBhuWwkeOBl+ips+OBl+OBj+aVmeOBiOOBpuOBj+OBoOOBleOBhO+8iOS+i++8muOAjOODl+ODquOCpuOCuSAyMDE15bm05byP44CN77yJ44CCYCxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIC0tLSBTdGVwMzogSk9JTuOBl+OBpuWVhuWTgeaDheWgseOCkuWPluW+lyAtLS1cbiAgICBjb25zdCBwcm9kdWN0SWRzID0gZml0bWVudHMubWFwKChmKSA9PiBmLnByb2R1Y3RfaWQpO1xuXG4gICAgY29uc3QgeyBkYXRhOiBwcm9kdWN0cywgZXJyb3I6IHByb2RFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiY2FyX3BhcnRzX3Byb2R1Y3RzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmluKFwiaWRcIiwgcHJvZHVjdElkcyk7XG5cbiAgICBpZiAocHJvZEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwi4p2MIHByb2R1Y3Rz5qSc57Si44Ko44Op44O8OlwiLCBwcm9kRXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7IGVycm9yOiBcInByb2R1Y3RzIHNlYXJjaCBmYWlsZWRcIiB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIGlmICghcHJvZHVjdHMgfHwgcHJvZHVjdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICAgIGFuc3dlcjogXCLoqbLlvZPjgZnjgovllYblk4Hjg4fjg7zjgr/jgYzopovjgaTjgYvjgorjgb7jgZvjgpPjgafjgZfjgZ/jgIJcIixcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIC8vIC0tLSBTdGVwNDog44Os44K544Od44Oz44K55pW05b2iIC0tLVxuICAgIGNvbnN0IHJlc3VsdHMgPSBwcm9kdWN0cy5tYXAoKHApID0+ICh7XG4gICAgICBuYW1lOiBwLnByb2R1Y3RfbmFtZSxcbiAgICAgIHByaWNlOiBwLnByaWNlLFxuICAgICAgdXJsOiBwLnVybCB8fCBcIu+8iFVSTOacquioreWumu+8iVwiLFxuICAgIH0pKTtcblxuICAgIGNvbnN0IGFuc3dlciA9XG4gICAgICByZXN1bHRzLmxlbmd0aCA9PT0gMVxuICAgICAgICA/IGDjgIwke2NhckluZm8ubW9kZWx944CN44Gr44GvICR7cmVzdWx0c1swXS5uYW1lfe+8iCR7cmVzdWx0c1swXS5wcmljZX3vvInjgYzpganlkIjjgZfjgb7jgZnjgIJgXG4gICAgICAgIDogYCR7Y2FySW5mby5tb2RlbH3jgavpganlkIjjgZnjgovjgqrjgqTjg6vjg5XjgqPjg6vjgr/jg7zjga/ku6XkuIvjga7pgJrjgorjgafjgZnvvJpcXG5cXG4ke3Jlc3VsdHNcbiAgICAgICAgICAgIC5tYXAoKHIpID0+IGDjg7ske3IubmFtZX3vvIgke3IucHJpY2V977yJYClcbiAgICAgICAgICAgIC5qb2luKFwiXFxuXCIpfWA7XG5cbiAgICByZXR1cm4gUmVzcG9uc2UuanNvbih7XG4gICAgICBzdGF0dXM6IFwib2tcIixcbiAgICAgIGNhckluZm8sXG4gICAgICByZXN1bHRzLFxuICAgICAgYW5zd2VyLFxuICAgIH0pO1xuICB9IGNhdGNoIChlcnJvcjogYW55KSB7XG4gICAgY29uc29sZS5lcnJvcihcIuKdjCBVbmV4cGVjdGVkIGVycm9yOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFJlc3BvbnNlLmpzb24oeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJPcGVuQUkiLCJvcGVuYWkiLCJhcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiT1BFTkFJX0FQSV9LRVkiLCJQT1NUIiwicmVxIiwicXVlcnkiLCJqc29uIiwiUmVzcG9uc2UiLCJlcnJvciIsInN0YXR1cyIsImV4dHJhY3Rpb25Qcm9tcHQiLCJleHRyYWN0aW9uUmVzIiwiY2hhdCIsImNvbXBsZXRpb25zIiwiY3JlYXRlIiwibW9kZWwiLCJtZXNzYWdlcyIsInJvbGUiLCJjb250ZW50IiwidGVtcGVyYXR1cmUiLCJyYXdUZXh0IiwiY2hvaWNlcyIsIm1lc3NhZ2UiLCJjYXJJbmZvIiwibWFrZXIiLCJ5ZWFyIiwiSlNPTiIsInBhcnNlIiwiY29uc29sZSIsIndhcm4iLCJsb2ciLCJkYXRhIiwiZml0bWVudHMiLCJmaXRFcnJvciIsImZyb20iLCJzZWxlY3QiLCJpbGlrZSIsImxlbmd0aCIsImFuc3dlciIsInByb2R1Y3RJZHMiLCJtYXAiLCJmIiwicHJvZHVjdF9pZCIsInByb2R1Y3RzIiwicHJvZEVycm9yIiwiaW4iLCJyZXN1bHRzIiwicCIsIm5hbWUiLCJwcm9kdWN0X25hbWUiLCJwcmljZSIsInVybCIsInIiLCJqb2luIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/ai/oilfilter-chat/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseClient.ts":
/*!*******************************!*\
  !*** ./lib/supabaseClient.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\n// Supabaseクライアントの共通設定\nconst supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(\"https://jqlhlvruxkcffjvjzxmy.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImpxbGhsdnJ1eGtjZmZqdmp6eG15Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjEzODEzNTQsImV4cCI6MjA3Njk1NzM1NH0.ozUsjna8HJ_aaAZNX3Zxmqoq6jU2xWhXXI5bGMP3n-w\");\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFBcUQ7QUFFckQsc0JBQXNCO0FBQ2YsTUFBTUMsV0FBV0QsbUVBQVlBLENBQ2xDRSwwQ0FBb0MsRUFDcENBLGtOQUF5QyxFQUN6QyIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcnBhcnRzLW5hdmktYWkvLi9saWIvc3VwYWJhc2VDbGllbnQudHM/M2E3ZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tIFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCI7XG5cbi8vIFN1cGFiYXNl44Kv44Op44Kk44Ki44Oz44OI44Gu5YWx6YCa6Kit5a6aXG5leHBvcnQgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCEsXG4gIHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIVxuKTtcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseClient.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/formdata-node","vendor-chunks/openai","vendor-chunks/@supabase","vendor-chunks/form-data-encoder","vendor-chunks/whatwg-url","vendor-chunks/agentkeepalive","vendor-chunks/tr46","vendor-chunks/web-streams-polyfill","vendor-chunks/tslib","vendor-chunks/node-fetch","vendor-chunks/webidl-conversions","vendor-chunks/ms","vendor-chunks/humanize-ms","vendor-chunks/event-target-shim","vendor-chunks/abort-controller"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fai%2Foilfilter-chat%2Froute&page=%2Fapi%2Fai%2Foilfilter-chat%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fai%2Foilfilter-chat%2Froute.ts&appDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fteruhikookuyama%2Fworkspace%2Fcarparts-navi-ai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();